<!--
   – Author: -Paolo M.- 
   – OS support: -Reliability Solutions-
   – Description: A competency tracker for apprentices, with mentor sign-off, dashboard, search, and filters.
   – Converted from Google Apps Script to standalone web application
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saw Filer Apprenticeship Program Competency Tracker (ETA671)</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6/dist/tippy.umd.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Modern Typography */
        * {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        /* Smooth Animations */
        * {
            transition: all 0.2s ease-in-out;
        }
        
        /* Modern Industrial Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .glass-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        /* Enhanced Competency Cards */
        .competency-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
        }
        
        .competency-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 0.95);
        }
        
        /* Modern Status Indicators */
        .status-indicator {
            position: relative;
            overflow: hidden;
        }
        
        .status-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .status-indicator:hover::before {
            left: 100%;
        }
        
        /* Floating Action Buttons */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }
        
        /* Enhanced Modal */
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        }
        
        /* Progress Bars with Animation */
        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* GSAP Animation Classes */
        .fade-in-up {
            opacity: 0;
            transform: translateY(30px);
        }

        .competency-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .competency-card:hover {
            transform: translateY(-4px) scale(1.02);
        }

        /* Login/Register Form Animations */
        .auth-form {
            animation: slideInUp 0.6s ease-out;
        }

        .auth-logo {
            animation: fadeInScale 0.8s ease-out;
        }

        .auth-input {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .auth-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }

        .auth-button {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .auth-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .auth-button:hover::before {
            left: 100%;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Floating label effect */
        .floating-label {
            position: relative;
        }

        .floating-label input:focus + label,
        .floating-label input:not(:placeholder-shown) + label {
            transform: translateY(-1.5rem) scale(0.8);
            color: #3b82f6;
        }

        .floating-label label {
            position: absolute;
            left: 0.75rem;
            top: 0.75rem;
            transition: all 0.3s ease;
            pointer-events: none;
            color: #6b7280;
        }
        
        /* Mobile-First Responsive Design */
        @media (max-width: 768px) {
            .fab {
                bottom: 1rem;
                right: 1rem;
                width: 48px;
                height: 48px;
            }
            
            .modal-content {
                margin: 1rem;
                max-height: calc(100vh - 2rem);
            }
            
            .competency-card {
                margin-bottom: 0.5rem;
            }
        }
        
        /* Scroll Animations */
        .fade-in-up {
            opacity: 0;
            transform: translateY(30px);
        }
        
        .fade-in-left {
            opacity: 0;
            transform: translateX(-30px);
        }
        
        .fade-in-right {
            opacity: 0;
            transform: translateX(30px);
        }
        /* --- Professional Background --- */
        body {
            background-color: #f8fafc;
            background-image:
                radial-gradient(circle at 25% 25%, #f1f5f9 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #e2e8f0 0%, transparent 50%);
            min-height: 100vh;
        }
        #app {
            position: relative;
            z-index: 1;
        }
        /* --- End Professional Styles --- */

        .signature-pad-container { position: relative; width: 100%; max-width: 400px; height: 200px; border: 1px solid #d1d5db; border-radius: 0.375rem; margin-bottom: 10px; touch-action: none; overflow: hidden; margin-left: auto; margin-right: auto;}
        .signature-pad-container canvas { position: absolute; left: 0; top: 0; width: 100%; height: 100%; background-color: #f9fafb; cursor: crosshair; border-radius: 0.375rem; }
        .hidden { display: none !important; }
        .competency-list::-webkit-scrollbar { width: 8px; }
        .competency-list::-webkit-scrollbar-track { background: #f3f4f6; border-radius: 10px; }
        .competency-list::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 10px; }
        .competency-list::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .loader-small { border: 2px solid rgba(255,255,255,0.3); border-top: 2px solid white; border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; display: inline-block; }
        .input-style { width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; appearance: none; background-color: #fff; font-size: 1rem; line-height: 1.5rem; }
        .input-style:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.25); }
        .input-style.error { border-color: #ef4444; }
        button:disabled { opacity: 0.6; cursor: not-allowed; }

        .tippy-box[data-theme~='custom-light'] { background-color: #f3f4f6; color: #1f2937; border: 1px solid #d1d5db; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .tippy-box[data-theme~='custom-light'][data-placement^='top'] > .tippy-arrow::before { border-top-color: #d1d5db; }
        .tippy-box[data-theme~='custom-light'][data-placement^='bottom'] > .tippy-arrow::before { border-bottom-color: #d1d5db; }

        .modal-backdrop { background-color: rgba(0, 0, 0, 0.6); }
        .modal-content { max-height: 90vh; overflow-y: auto; }

        .status-tag {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px; 
            height: 24px;
            border-radius: 50%;
            font-size: 14px; 
            font-weight: bold;
            margin-right: 8px;
            flex-shrink: 0;
            line-height: 1; 
        }
        .status-pending { background-color: #e5e7eb; color: #4b5563; } 
        .status-viewed { background-color: #dbeafe; color: #1d4ed8; } 
        .status-selfRated { background-color: #fef9c3; color: #ca8a04; } 
        .status-ready { background-color: #ffedd5; color: #c2410c; } 
        .status-reviewed { background-color: #dcfce7; color: #16a34a; } 

        .self-rating-label { display: inline-block; padding: 8px 16px; border: 1px solid #d1d5db; border-radius: 9999px; cursor: pointer; transition: all 0.2s ease-in-out; margin-right: 8px; margin-bottom: 8px; }
        .self-rating-label:hover { background-color: #f3f4f6; }
        .self-rating-input:checked + .self-rating-label { background-color: #3b82f6; color: white; border-color: #2563eb; }
        .self-rating-input { position: absolute; opacity: 0; pointer-events: none; } 

        #competency-detail-modal { z-index: 50; } 

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            background-color: #ffffff;
            color: #374151;
            transition: background-color 0.2s, color 0.2s;
        }
        .filter-btn:hover {
            background-color: #f3f4f6;
        }
        .filter-btn.active {
            background-color: #3b82f6;
            color: #ffffff;
            border-color: #2563eb;
        }
        @keyframes flash-green {
            0% { background-color: #dcfce7; }
            50% { background-color: #a7f3d0; }
            100% { background-color: transparent; }
        }
        .flash-update {
            animation: flash-green 1.5s ease-out;
        }

        /* New Loader Styles */
        .pl {
            margin: auto;
            width: 128px;
            height: 128px;
        }
        .pl__ring, .pl__drop, .pl__drop-inner, .pl__pan, .pl__shadow {
            animation: pan 2s cubic-bezier(0.65,0,0.35,1) infinite;
        }
        .pl__ring {
            animation-name: flip-ring;
        }
        .pl__drop, .pl__drop-inner {
            animation-timing-function: cubic-bezier(0.33,0.84,0.67,0.84);
        }
        .pl__drop--1 { animation-name: drop-1; transform-origin: 13px 60px; }
        .pl__drop--1 .pl__drop-inner { animation-name: drop-1-inner; }
        .pl__drop--2 { animation-name: drop-2; transform-origin: 13px 60px; }
        .pl__drop--2 .pl__drop-inner { animation-name: drop-2-inner; }
        .pl__drop--3 { animation-name: drop-3; transform-origin: 67px 72px; }
        .pl__drop--3 .pl__drop-inner { animation-name: drop-3-inner; }
        .pl__drop--4 { animation-name: drop-4; transform-origin: 67px 72px; }
        .pl__drop--4 .pl__drop-inner { animation-name: drop-4-inner; }
        .pl__drop--5 { animation-name: drop-5; transform-origin: 67px 72px; }
        .pl__drop--5 .pl__drop-inner { animation-name: drop-5-inner; }
        .pl__pan { transform-origin: 36px 74px; }
        .pl__shadow { animation-name: pan-shadow; transform-origin: 36px 124.5px; }

        @keyframes drop-1 { from, 30% { transform: translate(0,0); visibility: visible; } 50%, to { transform: translate(-6px,0); } }
        @keyframes drop-1-inner { from, 30% { fill: hsla(223,10%,70%,1); transform: translate(0,0); } 50%, to { fill: hsla(223,10%,70%,0); transform: translate(0,-27px); } }
        @keyframes drop-2 { from, 30% { transform: translate(0,0); visibility: visible; } 50%, to { transform: translate(-8px,0); } }
        @keyframes drop-2-inner { from, 30% { fill: hsla(223,10%,70%,1); transform: translate(0,0); } 50%, to { fill: hsla(223,10%,70%,0); transform: translate(0,-9px); } }
        @keyframes drop-3 { from, 78% { transform: translate(0,0); visibility: visible; } 98%, to { transform: translate(-24px,0); } }
        @keyframes drop-3-inner { from, 78% { fill: hsla(223,10%,70%,1); transform: translate(0,0); } 98%, to { fill: hsla(223,10%,70%,0); transform: translate(0,-28px); } }
        @keyframes drop-4 { from, 78% { transform: translate(0,0); visibility: visible; } 98%, to { transform: translate(-8px,0); } }
        @keyframes drop-4-inner { from, 78% { fill: hsla(223,10%,70%,1); transform: translate(0,0); } 98%, to { fill: hsla(223,10%,70%,0); transform: translate(0,-36px); } }
        @keyframes drop-5 { from, 78% { transform: translate(0,0); visibility: visible; } 98%, to { transform: translate(8px,0); } }
        @keyframes drop-5-inner { from, 78% { fill: hsla(223,10%,70%,1); transform: translate(0,0); } 98%, to { fill: hsla(223,10%,70%,0); transform: translate(0,-32px); } }
        @keyframes flip-ring { from, 27% { stroke-dashoffset: 20; stroke-width: 4px; } 53.5% { stroke-dashoffset: -100; stroke-width: 10px; } 80%, to { stroke-dashoffset: -220; stroke-width: 4px; } }
        @keyframes pan { from, 88%, to { transform: translate(0,0) rotate(0); } 20% { transform: translate(-5px,0) rotate(-30deg); } 30% { transform: translate(0,0) rotate(20deg); } 60%, 78% { transform: translate(0,0) rotate(0); } 81.33% { transform: translate(0,4px) rotate(0); } 84.67% { transform: translate(0,-2px) rotate(0); } }
        @keyframes pan-shadow { from, 88%, to { fill: hsla(223,10%,50%,0.2); transform: scaleX(1); } 20% { fill: hsla(223,10%,50%,0.2); transform: scaleX(0.77); } 30% { fill: hsla(223,10%,50%,0.2); transform: scaleX(1); } 60%, 78% { fill: hsla(223,10%,50%,0.2); transform: scaleX(1); } 81.33% { fill: hsla(223,10%,50%,0.25); transform: scaleX(0.87); } 84.67% { fill: hsla(223,10%,50%,0.225); transform: scaleX(1.065); } }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media print {
            body { margin: 20px; font-size: 10pt; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            header, main > *:not(#report-view), #loading, #error-message, #success-message,
            #login-view, #register-view, #forgot-password-view, #apprentice-dashboard,
            #competency-detail-modal, footer,
            [data-tippy-root] 
            { display: none !important; }

            #report-view { display: block !important; margin: 0; padding: 0; }

            #report-header { display: flex !important; justify-content: space-between !important; align-items: center !important; margin-bottom: 15px !important; border-bottom: 1px solid #999 !important; padding-bottom: 8px !important;}
            #report-header .logos-left, #report-header .logos-right {  }
            #report-header img { max-height: 35px !important; display: block !important; }
            #report-header h1 { display: none !important; } 

            #report-job-info { margin-bottom: 15px; font-size: 10pt; display: block !important; }
            #report-job-info h2 { font-size: 12pt; font-weight: bold; text-align: center; margin-bottom: 5px; }
            #report-job-info p { text-align: center; margin-bottom: 8px; }
            #report-job-info .codes { text-align: center; font-weight: bold; margin-bottom: 10px; }

            #report-rating-info { margin-bottom: 15px; display: block !important; }
            #report-rating-info h4 { font-weight: bold; margin-bottom: 5px; }
            #report-rating-info table { width: 100%; font-size: 8pt; border-collapse: collapse; }
            #report-rating-info th, #report-rating-info td { border: 1px solid #ccc; padding: 3px 5px; text-align: left; }
            #report-rating-info th { background-color: #f2f2f2 !important; }
            #report-rating-info td:last-child { text-align: center; font-weight: bold; }

            #report-user-info { border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; font-size: 11pt; }
            #report-user-info dl div { margin-bottom: 3px;}
            #report-user-info dt { font-weight: bold; display: inline-block; width: 80px; }
            #report-user-info dd { display: inline-block; margin-left: 10px; }
            #report-user-info dd.blank-field { border-bottom: 1px dotted #666; min-width: 200px; display: inline-block; height: 1.2em; vertical-align: bottom;}

            .report-category-section { margin-bottom: 20px; page-break-inside: avoid; }
            .report-category-title { font-size: 13pt; font-weight: bold; border-bottom: 2px solid #666; padding-bottom: 3px; margin-bottom: 8px; }
            .report-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 9pt; table-layout: fixed; } 
            .report-table th, .report-table td { border: 1px solid #ccc; padding: 4px 6px; text-align: left; vertical-align: top; word-wrap: break-word; } 
            .report-table th { background-color: #f2f2f2 !important; font-weight: bold; }

            .report-table th.task, .report-table td.task { width: 45%; } 
            .report-table th.mentor-rating, .report-table td.mentor-rating,
            .report-table th.mentor-rating-blank, .report-table td.mentor-rating-blank { width: 15%; text-align: center; font-weight: bold; } 
            .report-table th.date, .report-table td.date,
            .report-table th.date-blank, .report-table td.date-blank { width: 15%; white-space: nowrap; } 
            .report-table th.signature, .report-table td.signature,
            .report-table th.signature-blank, .report-table td.signature-blank { width: 25%; } 

            .report-table td.mentor-rating, .report-table td.date, .report-table td.signature,
            .report-table td.mentor-rating-blank, .report-table td.date-blank, .report-table td.signature-blank { min-height: 25px; } 

            .report-table td.signature img { max-height: 30px; max-width: 100px; display: block; margin-top: 2px; }
            .report-table td.signature span { font-style: italic; color: #555; }

            #report-summary { display: none !important; }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app" class="container mx-auto p-4 max-w-7xl min-h-screen flex flex-col">

         <header class="glass-header sticky top-0 z-50 p-4 lg:p-6 mb-8 fade-in-up">
             <div class="max-w-7xl mx-auto flex flex-wrap justify-between items-center gap-y-3 gap-x-4">
                 <div class="flex items-center space-x-4 flex-grow min-w-0">
                     <div class="relative">
                         <img src="logo.png" alt="SFAP Logo" class="h-12 w-12 lg:h-16 lg:w-16 rounded-xl shadow-lg transition-transform duration-300 hover:scale-105">
                         <div class="absolute inset-0 rounded-xl bg-gradient-to-br from-blue-400/20 to-purple-600/20"></div>
                     </div>
                     <div class="min-w-0">
                         <h1 class="text-xl sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent">
                             Saw Filer Apprenticeship Program
                         </h1>
                         <p class="text-sm lg:text-base text-slate-600 font-medium">Competency Tracker (ETA671)</p>
                     </div>
                 </div>
         </header>

        <main class="flex-grow">
            <div id="loading" class="hidden fixed inset-0 bg-gray-400 bg-opacity-50 flex items-center justify-center z-[100]">
                <svg class="pl" viewBox="0 0 128 128" width="128px" height="128px" role="img" aria-label="A pan being used to flip a blob resembling bacon as it splashes drops of grease in and out">
                    <clipPath id="pan-clip">
                        <rect rx="12" ry="14" x="4" y="52" width="68" height="28" />
                    </clipPath>
                    <defs>
                        <linearGradient id="pl-grad" x1="0" y1="0" x2="0" y2="1">
                            <stop offset="0%" stop-color="#000" />
                            <stop offset="100%" stop-color="#fff" />
                        </linearGradient>
                        <mask id="pl-mask">
                            <rect x="0" y="0" width="88" height="80" fill="url(#pl-grad)" />
                        </mask>
                    </defs>
                    <g fill="currentColor">
                        <g fill="none" stroke-dasharray="20 221" stroke-dashoffset="20" stroke-linecap="round" stroke-width="4">
                            <g stroke="hsl(38,90%,50%)">
                                <circle class="pl__ring" cx="44" cy="40" r="35" transform="rotate(90,44,40)" />
                            </g>
                            <g stroke="hsl(8,90%,40%)" mask="url(#pl-mask)">
                                <circle class="pl__ring" cx="44" cy="40" r="35" transform="rotate(90,44,40)" />
                            </g>
                        </g>
                        <g fill="hsla(223,10%,70%,0)">
                            <g class="pl__drop pl__drop--1">
                                <circle class="pl__drop-inner" cx="13" cy="60" r="2" />
                            </g>
                            <g class="pl__drop pl__drop--2">
                                <circle class="pl__drop-inner" cx="13" cy="60" r="2" />
                            </g>
                            <g class="pl__drop pl__drop--3">
                                <circle class="pl__drop-inner" cx="67" cy="72" r="2" />
                            </g>
                            <g class="pl__drop pl__drop--4">
                                <circle class="pl__drop-inner" cx="67" cy="72" r="2" />
                            </g>
                            <g class="pl__drop pl__drop--5">
                                <circle class="pl__drop-inner" cx="67" cy="72" r="2" />
                            </g>
                        </g>
                        <g class="pl__pan">
                            <rect rx="2" ry="2" x="4" y="66" width="68" height="14" clip-path="url(#pan-clip)" id="pan" />
                            <rect rx="2" ry="2" x="76" y="66" width="48" height="7" />
                        </g>
                        <rect class="pl__shadow" fill="hsla(223,10%,50%,0.2)" rx="3.5" ry="3.5" x="10" y="121" width="60" height="7" />
                    </g>
                </svg>
            </div>
            <div class="max-w-md mx-auto mb-4">
                <div id="error-message" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded shadow" role="alert">
                    <p class="font-bold">Error!</p>
                    <p id="error-text" class="text-sm"></p>
                </div>
                <div id="success-message" class="hidden bg-green-100 border-l-4 border-green-500 text-green-700 p-3 rounded shadow" role="alert">
                    <p id="success-text" class="text-sm"></p>
                </div>
            </div>

             <div id="login-view" class="auth-form bg-white p-6 sm:p-8 rounded-lg shadow-lg max-w-md mx-auto">
                 <!-- Logo and Branding -->
                 <div class="auth-logo text-center mb-6">
                     <img src="logo.png" alt="SFAP Logo" class="h-16 w-auto mx-auto mb-3">
                     <h1 class="text-xl font-bold text-gray-800 mb-1">Saw Filer Apprenticeship Program</h1>
                     <p class="text-sm text-gray-600">Competency Tracker</p>
                 </div>
                 <h2 class="text-2xl font-semibold mb-6 text-center text-gray-700">Login</h2>
                 <form id="login-form" novalidate class="space-y-4">
                     <div>
                         <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                         <input type="email" id="email" name="email" required autocomplete="email" class="auth-input input-style">
                     </div>
                     <div>
                         <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                         <input type="password" id="password" name="password" required autocomplete="current-password" class="auth-input input-style">
                     </div>
                     <button type="submit" class="auth-button w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition !mt-6">Login</button>
                 </form>
                 <div class="mt-4 text-center text-sm"><a href="#" id="show-register-link" class="font-medium text-blue-600 hover:text-blue-500">Don't have an account? Register</a></div>
                 <div class="mt-2 text-center text-sm"><a href="#" id="show-forgot-password-link" class="font-medium text-gray-600 hover:text-gray-500">Forgot Password?</a></div>
             </div>

             <div id="register-view" class="auth-form hidden bg-white p-6 sm:p-8 rounded-lg shadow-lg max-w-lg mx-auto">
                 <!-- Logo and Branding -->
                 <div class="auth-logo text-center mb-6">
                     <img src="logo.png" alt="SFAP Logo" class="h-16 w-auto mx-auto mb-3">
                     <h1 class="text-xl font-bold text-gray-800 mb-1">Saw Filer Apprenticeship Program</h1>
                     <p class="text-sm text-gray-600">Competency Tracker</p>
                 </div>
                 <h2 class="text-2xl font-semibold mb-4 text-center text-gray-700">Register New Account</h2>
                 <p class="text-xs text-center text-red-600 mb-4 font-medium">Note: Use a unique password. Passwords are stored securely using bcrypt.</p>
                 <form id="register-form" novalidate>
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                         <div> <label for="reg-firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name</label> <input type="text" id="reg-firstName" required class="input-style"> </div>
                         <div> <label for="reg-lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label> <input type="text" id="reg-lastName" required class="input-style"> </div>
                     </div>
                     <div class="mb-4"> <label for="reg-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label> <input type="email" id="reg-email" required autocomplete="email" class="input-style"> </div>
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                         <div> <label for="reg-cohort" class="block text-sm font-medium text-gray-700 mb-1">Cohort</label> <input type="text" id="reg-cohort" required class="input-style"> </div>
                         <div> <label for="reg-company" class="block text-sm font-medium text-gray-700 mb-1">Company</label> <input type="text" id="reg-company" required class="input-style"> </div>
                     </div>
                     <div class="mb-4"> <label for="reg-password" class="block text-sm font-medium text-gray-700 mb-1">Password (min. 6)</label> <input type="password" id="reg-password" required minlength="6" autocomplete="new-password" class="input-style"> </div>
                     <div class="mb-6"> <label for="reg-confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label> <input type="password" id="reg-confirmPassword" required minlength="6" autocomplete="new-password" class="input-style"> </div>
                     <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition">Register</button>
                 </form>
                 <div class="mt-4 text-center text-sm"> <a href="#" id="back-to-login-link-reg" class="font-medium text-blue-600 hover:text-blue-500">Already have an account? Login</a> </div>
             </div>

             <div id="forgot-password-view" class="hidden bg-white p-6 sm:p-8 rounded-lg shadow-lg max-w-md mx-auto text-center">
                 <h2 class="text-xl font-semibold mb-4 text-gray-700">Forgot Password</h2>
                 <p class="text-gray-600 mb-6"> Password reset requires administrator assistance. Please contact your program administrator or lead mentor. </p>
                 <div class="mt-6 text-center text-sm"> <a href="#" id="back-to-login-link-forgot" class="font-medium text-blue-600 hover:text-blue-500">Back to Login</a> </div>
             </div>

            <div id="apprentice-dashboard" class="hidden">
                <!-- Main Header with Logo and User Info -->
                <header class="header-content bg-gradient-to-r from-slate-700 to-slate-800 text-white p-4 rounded-xl mb-4 shadow-lg">
                    <div class="flex flex-col lg:flex-row justify-between items-center gap-4">
                        <div class="logo-container flex items-center space-x-4">
                            <img src="logo.png" alt="SFAP Logo" class="h-12 w-auto">
                            <div>
                                <h1 class="text-2xl lg:text-3xl font-bold">Saw Filer Apprenticeship Program</h1>
                                <p class="text-blue-100 text-sm lg:text-base">Competency Tracker</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div id="user-info" class="text-right">
                                <div id="user-name" class="font-semibold text-lg"></div>
                                <div id="user-details" class="text-blue-100 text-sm"></div>
                            </div>
                            <button id="logout-button" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Action Bar -->
                <div class="flex flex-wrap justify-between items-center mb-3 gap-2">
                    <h2 class="text-2xl font-bold text-gray-800">My Competencies</h2>
                    <div class="flex space-x-2">
                        <button id="print-report-button" class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gray-400 transition-all duration-300" disabled title="Print or Save as PDF">
                            <i class="fas fa-print mr-2"></i> Print Form
                        </button>
                        <button id="print-blank-report-button" class="px-4 py-2 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gray-300 transition-all duration-300" disabled title="Wait for data to load">
                            <i class="fas fa-print mr-2"></i> Print Blank Form
                        </button>
                    </div>
                </div>

                <div id="dashboard-summary" class="mb-2 glass-card p-3 lg:p-4 rounded-xl">
                    <div class="flex items-center space-x-3 mb-2">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-chart-line text-white text-lg"></i>
                        </div>
                        <h3 class="text-xl lg:text-2xl font-bold text-gray-800">Progress Overview</h3>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 mb-2 overflow-hidden shadow-inner">
                        <div id="summary-progress-bar" class="progress-bar h-4 rounded-full" style="width: 0%;"></div>
                    </div>
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6">
                        <div class="text-center p-4 bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl border border-slate-200">
                            <div class="w-8 h-8 bg-slate-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-list text-white text-sm"></i>
                            </div>
                            <span class="font-bold text-2xl text-slate-800 block" id="summary-total">0</span>
                            <span class="text-sm text-slate-600 font-medium">Total</span>
                        </div>
                        <div class="text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200">
                            <div class="w-8 h-8 bg-green-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-check text-white text-sm"></i>
                            </div>
                            <span class="font-bold text-2xl text-green-700 block" id="summary-reviewed">0</span>
                            <span class="text-sm text-green-600 font-medium">Reviewed</span>
                        </div>
                        <div class="text-center p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200">
                            <div class="w-8 h-8 bg-orange-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-clock text-white text-sm"></i>
                            </div>
                            <span class="font-bold text-2xl text-orange-700 block" id="summary-ready">0</span>
                            <span class="text-sm text-orange-600 font-medium">Ready</span>
                        </div>
                        <div class="text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200">
                            <div class="w-8 h-8 bg-blue-500 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                <i class="fas fa-percentage text-white text-sm"></i>
                            </div>
                            <span class="font-bold text-2xl text-blue-700 block" id="summary-percentage">0%</span>
                            <span class="text-sm text-blue-600 font-medium">Complete</span>
                        </div>
                        <div>
                            <span class="font-bold text-lg text-gray-600" id="summary-pending">0</span>
                            <span class="block text-xs text-gray-500">Pending</span>
                        </div>
                    </div>
                </div>

                <div id="filter-controls" class="mb-4 flex flex-col sm:flex-row gap-4 items-center">
                    <div class="flex-grow w-full sm:w-auto">
                        <input type="search" id="search-input" placeholder="Search competencies..." class="input-style w-full max-w-xs">
                    </div>
                    <div id="filter-buttons" class="flex rounded-md shadow-sm" role="group">
                        <button type="button" class="filter-btn rounded-l-md active" data-filter="all">All</button>
                        <button type="button" class="filter-btn" data-filter="pending">Pending</button>
                        <button type="button" class="filter-btn" data-filter="ready">Ready</button>
                        <button type="button" class="filter-btn rounded-r-md" data-filter="reviewed">Reviewed</button>
                    </div>
                    <div class="flex-grow sm:text-right">
                        <a href="https://drive.google.com/file/d/1gnQBkawGSLShlEB7T06WUEE31MznVNsw/view?usp=sharing" target="_blank" class="text-sm text-blue-600 hover:underline"><i class="fas fa-download mr-1"></i> Apprentice Agreement</a>
                        <span class="mx-2 text-gray-300">|</span>
                        <a href="https://drive.google.com/file/d/1LY8K1epY_DXEH4ra5K9Pi1GcA280hpB4/view?usp=sharing" target="_blank" class="text-sm text-blue-600 hover:underline"><i class="fas fa-download mr-1"></i> SLMA Standards</a>
                    </div>
                </div>

                <div id="apprentice-competency-list" class="space-y-6">
                    <p class="text-center text-gray-500 p-4">Loading competencies...</p>
                </div>
            </div>

        </main>

        <div id="competency-detail-modal" class="hidden fixed inset-0 modal-backdrop flex items-center justify-center p-4 transition-opacity duration-300 z-50" role="dialog" aria-modal="true" aria-labelledby="competency-detail-title">
            <div class="bg-white p-4 sm:p-6 rounded-lg shadow-xl max-w-3xl w-full transform transition-all duration-300 scale-95 opacity-0 modal-content" id="competency-detail-modal-content">
                <input type="hidden" id="detail-competency-id">
                <input type="hidden" id="detail-current-status">
                <input type="hidden" id="detail-mode">

                <div class="flex justify-between items-start border-b pb-3 mb-4">
                    <div>
                        <h3 id="competency-detail-title" class="text-xl font-semibold text-gray-800">Competency Details</h3>
                        <p class="text-sm text-gray-500 mt-1" id="competency-detail-text">Loading competency...</p>
                        <p class="text-xs text-gray-500 mt-1">Apprentice: <span id="detail-apprentice-name-display" class="font-medium"></span></p>
                    </div>
                    <button type="button" id="close-detail-modal-button" class="text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 rounded-full p-1 ml-2">
                        <i class="fas fa-times fa-lg"></i>
                    </button>
                </div>

                <div id="competency-detail-content-area">

                    <!-- Apprentice/Mentor Description View -->
                    <div id="apprentice-phase-content" class="space-y-4 hidden">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-1">What this means:</h4>
                            <p class="text-sm text-gray-600 bg-gray-50 p-2 rounded border min-h-[4em]" id="detail-what-text"></p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-1">What it looks like in practice:</h4>
                            <p class="text-sm text-gray-600 bg-gray-50 p-2 rounded border min-h-[4em]" id="detail-looks-like-text"></p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-1">Why this is critical:</h4>
                            <p class="text-sm text-gray-600 bg-gray-50 p-2 rounded border min-h-[4em]" id="detail-critical-text"></p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-1">References:</h4>
                            <p class="text-sm text-gray-600 bg-gray-50 p-2 rounded border" id="detail-reference-text"></p>
                        </div>

                        <div id="apprentice-self-assessment-section" class="pt-4 border-t">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Self-Assessment (How ready do you feel?):</label>
                            <div id="self-rating-options" class="flex flex-wrap gap-2">
                                <input type="radio" name="self_rating" value="1" id="self_rating_1" class="self-rating-input">
                                <label for="self_rating_1" class="self-rating-label">1 - Need More Practice</label>
                                <input type="radio" name="self_rating" value="2" id="self_rating_2" class="self-rating-input">
                                <label for="self_rating_2" class="self-rating-label">2 - Almost Ready</label>
                                <input type="radio" name="self_rating" value="3" id="self_rating_3" class="self-rating-input">
                                <label for="self_rating_3" class="self-rating-label">3 - Ready to Perform</label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Select a rating to enable the 'Ready for Mentor' button.</p>
                        </div>

                        <div class="flex justify-end pt-4 mt-4 border-t">
                            <button type="button" id="ready-for-mentor-button" class="hidden px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-400 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center min-w-[160px]" disabled>
                                <span id="ready-button-text">Ready for Mentor</span>
                                <div id="ready-spinner" class="hidden loader-small ml-2"></div>
                            </button>
                            <button type="button" id="mentor-proceed-to-review-button" class="hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition">
                                Continue to Mentor Review
                            </button>
                        </div>
                    </div>

                    <!-- Mentor Rating/Signing View -->
                    <div id="mentor-phase-content" class="hidden space-y-4">
                        <div class="bg-blue-50 p-3 rounded border border-blue-200">
                            <h4 class="font-semibold text-gray-700 mb-1">Apprentice Self-Assessment:</h4>
                            <p class="text-sm text-gray-600">Rating: <span id="mentor-view-self-rating" class="font-bold">N/A</span></p>
                        </div>
                        
                        <div id="mentor-rating-system-display" class="mb-4 p-3 border rounded-md bg-gray-50 text-xs">
                            <!-- Rating system will be injected here by JavaScript -->
                        </div>

                        <div class="mb-4">
                            <label for="mentor-name-input" class="block text-sm font-medium text-gray-700 mb-1">Mentor Name:</label>
                            <input type="text" id="mentor-name-input" required class="input-style w-full">
                        </div>

                        <div class="mb-4">
                            <label for="mentor-rating-select" class="block text-sm font-medium text-gray-700 mb-1">Mentor Rating:</label>
                            <select id="mentor-rating-select" required class="input-style w-full">
                                <option value="">-- Select Rating --</option>
                                <option value="5">5 - Exceeds All Expectations</option>
                                <option value="4">4 - Meets & Exceeds Some Expectations</option>
                                <option value="3">3 - Meets Expectations</option>
                                <option value="2">2 - Meets Some Expectations</option>
                                <option value="1">1 - Does Not Meet/Meets Some Expectations</option>
                                <option value="0">0 - Does Not Meet Expectations</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="mentor-validation-date" class="block text-sm font-medium text-gray-700 mb-1">Validation Date:</label>
                            <input type="date" id="mentor-validation-date" class="input-style w-full">
                        </div>

                        <div class="mb-4">
                            <label for="mentor-comments" class="block text-sm font-medium text-gray-700 mb-1">Mentor Comments (Optional):</label>
                            <textarea id="mentor-comments" rows="3" class="input-style w-full text-sm" placeholder="Provide feedback or observations..."></textarea>
                        </div>

                        <div id="signature-section" class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Mentor Signature:</label>
                            <div class="signature-pad-container">
                                <canvas id="mentor-signature-canvas"></canvas>
                            </div>
                            <button type="button" id="mentor-clear-signature-button" class="text-sm text-blue-600 hover:underline focus:outline-none focus:ring-1 focus:ring-blue-400 rounded px-1">Clear Signature</button>
                        </div>

                        <div class="flex justify-end pt-4 border-t space-x-3">
                             <button type="button" id="mentor-cancel-button" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition">Cancel</button>
                            <button type="button" id="mentor-submit-button" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition flex items-center justify-center min-w-[160px]">
                                <span id="submit-button-text">Submit Signature</span>
                                <div id="submit-spinner" class="hidden loader-small ml-2"></div>
                            </button>
                        </div>
                    </div>

                    <!-- Read-Only Reviewed View -->
                    <div id="reviewed-phase-content" class="hidden space-y-3 text-sm">
                         <div class="bg-gray-50 p-3 rounded border">
                            <h4 class="font-semibold text-gray-700 mb-1">Apprentice Self-Assessment:</h4>
                            <p>Rating: <span id="reviewed-view-self-rating" class="font-bold">N/A</span></p>
                         </div>
                         <div class="bg-green-50 p-3 rounded border border-green-200">
                            <h4 class="font-semibold text-gray-700 mb-1">Mentor Review:</h4>
                            <p>Mentor: <span id="reviewed-view-mentor-name" class="font-bold">N/A</span></p>
                            <p>Rating: <span id="reviewed-view-mentor-rating" class="font-bold">N/A</span></p>
                            <p>Date: <span id="reviewed-view-date">N/A</span></p>
                            <p>Comments: <span id="reviewed-view-comments" class="whitespace-pre-wrap">N/A</span></p>
                            <div class="mt-2">
                                <p class="font-medium">Signature:</p>
                                <img id="reviewed-view-signature" src="" alt="Mentor Signature" class="border max-h-16 mt-1 bg-white">
                            </div>
                         </div>
                         <div class="flex justify-end pt-3 border-t mt-4">
                             <button type="button" id="edit-validation-button" class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 transition mr-3">Edit</button>
                             <button type="button" id="reviewed-close-button" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition">Close</button>
                         </div>
                    </div>

                </div>
            </div>
        </div>

         <div id="report-view" class="hidden">
             <div id="report-header">
                 <div class="logos-left"> <img src="https://reliabilitysolutions.net/wp-content/uploads/2024/05/logo.webp" alt="Reliability Solutions Logo" style="height: 40px;"> </div>
                 <h1>Report Title Placeholder</h1>
                 <div class="logos-right"> <img src="https://assets.noviams.com/novi-file-uploads/slma/structure/slma_logo_green_name_to_right_11_20_2017-1.png" alt="SLMA Logo" style="height: 40px;"> </div>
             </div>
             <div id="report-job-info" class="hidden"> </div>
             <div id="report-rating-info" class="hidden"> </div>
             <div id="report-user-info"> </div>
             <div id="report-competency-details"> </div>
             <div id="report-summary" class="hidden"> </div>
         </div>

    </div>

    <footer class="bg-gray-700 text-white text-xs p-4 text-center mt-8">
        <p class="mb-2">
            © <span id="footer-year"></span> Saw Filer Apprenticeship Program - Powered By Reliability Solutions.
        </p>
        <p class="text-gray-400">
            To ensure the integrity of your records, we strongly recommend periodically printing or saving a PDF of your progress report. This application is a tracking tool, and users are responsible for maintaining their official records.
        </p>
    </footer>

    <script src="app.js"></script>
    
    <!-- GSAP Animations -->
    <script>
        // Initialize GSAP animations when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Register ScrollTrigger plugin
            gsap.registerPlugin(ScrollTrigger);
            
            // Header animation
            gsap.from('.header-content', {
                duration: 1,
                y: -50,
                opacity: 0,
                ease: 'power3.out'
            });
            
            // Logo animation
            gsap.from('.logo-container img', {
                duration: 1.2,
                scale: 0,
                rotation: 360,
                ease: 'back.out(1.7)',
                delay: 0.3
            });
            
            // Progress overview cards animation
            gsap.from('.fade-in-up', {
                duration: 0.8,
                y: 30,
                opacity: 0,
                stagger: 0.1,
                ease: 'power2.out',
                scrollTrigger: {
                    trigger: '.fade-in-up',
                    start: 'top 80%',
                    toggleActions: 'play none none reverse'
                }
            });
            
            // Competency cards scroll animation (only if elements exist)
            if (document.querySelectorAll('.competency-card').length > 0) {
                gsap.from('.competency-card', {
                    duration: 0.6,
                    y: 50,
                    opacity: 0,
                    stagger: 0.1,
                    ease: 'power2.out',
                    scrollTrigger: {
                        trigger: '.competency-card',
                        start: 'top 85%',
                        toggleActions: 'play none none reverse'
                    }
                });
            }
            
            // Progress bar animation
            function animateProgressBar() {
                const progressBar = document.getElementById('summary-progress-bar');
                if (progressBar) {
                    const width = progressBar.style.width;
                    gsap.fromTo(progressBar,
                        { width: '0%' },
                        {
                            width: width,
                            duration: 1.5,
                            ease: 'power2.out',
                            scrollTrigger: {
                                trigger: progressBar,
                                start: 'top 80%',
                                toggleActions: 'play none none reverse'
                            }
                        }
                    );
                }
            }
            
            // Counter animation for statistics
            function animateCounters() {
                const counters = ['summary-total', 'summary-reviewed', 'summary-ready'];
                counters.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        const finalValue = parseInt(element.textContent) || 0;
                        gsap.fromTo(element,
                            { textContent: 0 },
                            {
                                textContent: finalValue,
                                duration: 1.5,
                                ease: 'power2.out',
                                snap: { textContent: 1 },
                                scrollTrigger: {
                                    trigger: element,
                                    start: 'top 80%',
                                    toggleActions: 'play none none reverse'
                                }
                            }
                        );
                    }
                });
                
                // Animate percentage
                const percentageElement = document.getElementById('summary-percentage');
                if (percentageElement) {
                    const finalValue = parseInt(percentageElement.textContent) || 0;
                    gsap.fromTo(percentageElement,
                        { textContent: '0%' },
                        {
                            textContent: finalValue + '%',
                            duration: 1.5,
                            ease: 'power2.out',
                            scrollTrigger: {
                                trigger: percentageElement,
                                start: 'top 80%',
                                toggleActions: 'play none none reverse'
                            }
                        }
                    );
                }
            }
            
            // Modal animations
            function animateModal(modal) {
                gsap.fromTo(modal,
                    { opacity: 0, scale: 0.8 },
                    { opacity: 1, scale: 1, duration: 0.3, ease: 'back.out(1.7)' }
                );
            }
            
            // Add hover animations to competency cards
            document.querySelectorAll('.competency-card').forEach(card => {
                card.addEventListener('mouseenter', () => {
                    gsap.to(card, {
                        y: -8,
                        scale: 1.02,
                        duration: 0.3,
                        ease: 'power2.out'
                    });
                });
                
                card.addEventListener('mouseleave', () => {
                    gsap.to(card, {
                        y: 0,
                        scale: 1,
                        duration: 0.3,
                        ease: 'power2.out'
                    });
                });
            });
            
            // Initialize animations after data loads
            setTimeout(() => {
                animateProgressBar();
                animateCounters();
            }, 500);
            
            // Refresh ScrollTrigger when content changes
            window.refreshScrollTrigger = () => {
                ScrollTrigger.refresh();
                setTimeout(() => {
                    animateProgressBar();
                    animateCounters();
                }, 100);
            };
        });
    </script>

</body>
</html>
<!--
   – --- End of index.html ---
-->